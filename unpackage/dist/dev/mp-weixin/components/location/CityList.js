(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/location/CityList"],{144:function(t,e,n){"use strict";n.r(e);var i=n(145),r=n(147);for(var c in r)"default"!==c&&function(t){n.d(e,t,(function(){return r[t]}))}(c);n(149);var s,a=n(11),o=Object(a["default"])(r["default"],i["render"],i["staticRenderFns"],!1,null,"68ac00b8",null,!1,i["components"],s);o.options.__file="components/location/CityList.vue",e["default"]=o.exports},145:function(t,e,n){"use strict";n.r(e);var i=n(146);n.d(e,"render",(function(){return i["render"]})),n.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(e,"components",(function(){return i["components"]}))},146:function(t,e,n){"use strict";var i;n.r(e),n.d(e,"render",(function(){return r})),n.d(e,"staticRenderFns",(function(){return s})),n.d(e,"recyclableRender",(function(){return c})),n.d(e,"components",(function(){return i}));var r=function(){var t=this,e=t.$createElement;t._self._c},c=!1,s=[];r._withStripped=!0},147:function(t,e,n){"use strict";n.r(e);var i=n(148),r=n.n(i);for(var c in i)"default"!==c&&function(t){n.d(e,t,(function(){return i[t]}))}(c);e["default"]=r.a},148:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(37));function r(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,i,r,c,s){try{var a=t[c](s),o=a.value}catch(u){return void n(u)}a.done?e(o):Promise.resolve(o).then(i,r)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function a(t){c(s,i,r,a,o,"next",t)}function o(t){c(s,i,r,a,o,"throw",t)}a(void 0)}))}}var a={data:function(){return{subkey:"M7ABZ-22FH4-7URUL-XDEVT-MSXO2-3FBLZ",qqmapsdk:{},amapPlugin:null,nearlySearchCityArr:[],currentCity:"",currentLatitude:Number,currentLongitude:Number,cityList:[],isShowCenterTips:!1,scrollTopId:"A",touches:{y1:Number,y2:Number,currentIndex:Number},listHeight:[]}},mounted:function(){var e=this;return s(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.amapPlugin=new e.amap.AMapWX({key:"90fb262cfdec4c92e6efd487be75c9b9"}),e.amapPlugin.getRegeo({success:function(t){var n=t[0].regeocodeData.addressComponent.city;e.currentCity=n,e.currentLatitude=t[0].latitude,e.currentLongitude=t[0].longitude}}),n.next=4,e.initCities();case 4:e._calculateHeight(),t.getStorage({key:"searchHistoryArr",success:function(t){var n=JSON.parse(t.data);n.forEach((function(t,n){e.nearlySearchCityArr.push({cityName:t.cityName,location:{lat:t.location.lat,lng:t.location.lng}})}),e)}}),t.$on("getSearchResult",(function(t){e.searchResultHandler(t)}));case 7:case"end":return n.stop()}}),n)})))()},methods:{searchResultHandler:function(t){for(var e=0;e<this.cityList.length;e++){for(var n=this.cityList[e],i=0;i<n.list.length;i++)n.list[i].cityName.indexOf(t)>=0||(this.cityList[e].list.splice(i,1),i--);0==n.list.length&&(this.cityList.splice(e,1),e--)}""==t&&(this.cityList=[],this.initCities())},initCities:function(){var t=this,e=n(14);this.qqmapsdk=new e({key:this.subkey});return new Promise((function(e,n){t.qqmapsdk.getCityList({success:function(n){n.result[1].forEach((function(e){var n=e.pinyin[0].substr(0,1).toUpperCase();if(t.isCityList(n)){for(var i=0;i<t.cityList.length;i++)if(n==t.cityList[i].index){t.cityList[i].list.push({cityName:e.fullname,location:{lat:e.location.lat,lng:e.location.lng}});break}}else t.cityList.push({index:n,list:[{cityName:e.fullname,location:{lat:e.location.lat,lng:e.location.lng}}]})})),t.cityList.sort((function(t,e){return t.index>e.index?1:-1})),e()}})}))},isCityList:function(t){for(var e=!1,n=0;n<this.cityList.length;n++)if(this.cityList[n].index==t){e=!0;break}return e},handleTouchStart:function(t){this.isShowCenterTips=!0,this.scrollTopId=t.currentTarget.dataset.currentletter,this.touches.y1=t.touches[0].clientY,this.touches.currentIndex=t.currentTarget.dataset.index},handleTouchMove:function(t){this.isShowCenterTips=!0,this.touches.y2=t.touches[0].clientY;var e=(this.touches.y2-this.touches.y1)/18|0,n=parseInt(this.touches.currentIndex+e);0==n?this.scrollTopId="tips":n<=21&&(this.scrollTopId=this.cityList[n].index)},handleTouchEnd:function(){var t=this;setTimeout((function(){t.isShowCenterTips=!1}),800)},_calculateHeight:function(){var e=this,n=0;this.listHeight.push(n),t.createSelectorQuery().in(this).selectAll(".nearly-city-list-item").boundingClientRect((function(t){t.forEach((function(t){n+=t.height,e.listHeight.push(n)}))})).exec()},chooseCity:function(e,n,i){t.navigateBack(),t.$emit("cityLocationUpdate",{lat:e,lng:n}),this.addChooseCityHistory(e,n,i)},addChooseCityHistory:function(e,n,i){var r=this.nearlySearchCityArr.findIndex((function(t){return t.cityName==i}));r<0?this.nearlySearchCityArr.unshift({cityName:i,location:{lat:e,lng:n}}):this.nearlySearchCityArr.unshift(this.nearlySearchCityArr.splice(r,1)[0]),t.setStorage({key:"searchHistoryArr",data:JSON.stringify(this.nearlySearchCityArr)})}}};e.default=a}).call(this,n(1)["default"])},149:function(t,e,n){"use strict";n.r(e);var i=n(150),r=n.n(i);for(var c in i)"default"!==c&&function(t){n.d(e,t,(function(){return i[t]}))}(c);e["default"]=r.a},150:function(t,e,n){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/location/CityList.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/location/CityList-create-component',
    {
        'components/location/CityList-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(144))
        })
    },
    [['components/location/CityList-create-component']]
]);
